/*! mitradstuttgart.de - 2015-02-24 */
function makeMap(a,b,c){L.mapbox.accessToken="pk.eyJ1IjoibWl0cmFkc3R1dHRnYXJ0IiwiYSI6ImNaSko4cHcifQ.46Jz7d_F7BoNcrIiBLYUaQ",$.getJSON(b,function(b){function d(){var b=$(window).height(),c=850;c>b&&(c=.9*b),$("#"+a).css("height",c+"px")}d(),$(window).resize(function(){d()});var e=L.geoJson(b,{style:L.mapbox.simplestyle.style,pointToLayer:function(a,b){return new L.marker(b,{icon:L.mapbox.marker.icon(a.properties),title:a.properties.Treffpunkt+": "+a.properties.Zeit,riseOnHover:!0})},onEachFeature:function(a,b){var c="";if("LineString"===a.geometry.type)c+='<div style="text-align:center;">'+a.properties.Strecke+'<br><span class="fa fa-bicycle"></span>&nbsp;<strong>'+a.properties.Distanz+"</strong></div>";else{if(c+="<div style='text-align:center;'><strong>"+a.properties.Ort+"</strong><br><i>Treffpunkt:</i> <mark>"+a.properties.Treffpunkt+'</mark><br><span class="fa fa-clock-o"></span> <mark>'+a.properties.Zeit+"</mark>",a.properties.Zug){c+='<small><br>&nbsp;<table class="table table-striped table-condensed">';var d=a.properties.Zug;for(var e in d)d.hasOwnProperty(e)&&(c+='<tr><td class="text-left"><span class="fa fa-train"></span> '+e+'</td><td class="text-right"><span class="fa fa-clock-o"></span> '+d[e]+"</td></tr>");c+="</table></small>"}a.properties.image&&(c+='<img src="'+a.properties.image.src+'" alt="'+a.properties.image.alt+'" class="img-rounded" width="100%">'),c+="</div>"}b.bindPopup(c)}}),f=L.mapbox.map(a,"mitradstuttgart.l7l4l9ka",{minZoom:10,maxZoom:18,maxBounds:[[47.5,7.5],[50,10.5]]}).fitBounds(e.getBounds());e.addTo(f);var g="<strong>MitRadGelegenheit</strong>";if(c&&c[0])for(g+="<br>"+c[0],i=1;i<c.length;i++)g+="<br>â†’ "+c[i];f.legendControl.addLegend(g)})}